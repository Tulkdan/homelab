- name: Startpage
  width: slim
  center-vertically: true
  columns:
    - size: full
      widgets:
        - type: search
          search-engine: duckduckgo
          bangs:
            - title: Youtube
              shortcut: "!yt"
              url: https://www.youtube.com/results?search_query={QUERY}
            - title: Nix Packages
              shortcut: "!np"
              url: https://search.nixos.org/packages?type=packages&channel=unstable&query={QUERY}

        - type: monitor
          cache: 1m
          title: Services
          sites:
            - title: Stump
              url: https://stump.tulkdan.dev
              icon: si:bookstack
            - title: Paisa
              url: https://paisa.tulkdan.dev
            - title: AdGuard
              url: https://adguard.tulkdan.dev
              icon: si:adguard
            - title: Vaultwarden
              url: https://vaultwarden.tulkdan.dev
              icon: si:vaultwarden

        - type: markets
          markets:
            - symbol: ^BVSP
              name: IBOVESPA
            - symbol: MGLU3.SA
              name: MGLU3
            - symbol: ITUB4.SA
              name: ITUB4
            - symbol: BBAS3.SA
              name: BBAS
            - symbol: NU
              name: Nubank

        - type: custom-api
          title: Daily Go Problem
          cache: 6h
          url: https://www.goproblems.com/api/v2/problems/daily
          template: |
            {{ $targetCategory := "medium" }}

            {{ range .JSON.Array "entries" }}
              {{ if eq (.String "category") $targetCategory }}
                {{ $id        := .Int "id" }}
                {{ $imageUrl  := .String "imageUrl" }}
                {{ $diffVal   := .Int "difficulty.value" }}
                {{ $diffUnit  := .String "difficulty.unit" }}
                {{ $genre     := .String "genre" }}
                {{ $problemUrl := printf "https://www.goproblems.com/problems/%d" $id }}
                {{ $difficulty := printf "%d %s" $diffVal $diffUnit }}

                <div style="text-align: center;">
                  <h3 style="font-size: 1.4rem; margin: 0 0 4px 0">
                    Medium Problem of the Day
                  </h3>
                  <div style="margin-bottom: 6px; font-size: 0.85rem">
                    {{ $difficulty }}    {{ $genre }}
                  </div>
                  <a href="{{ $problemUrl }}" target="_blank">
                    <img src="{{ $imageUrl }}"
                         alt="Go Problem of the Day"
                         style="max-width:100%; height:auto; border-radius: 3px; display: inline">
                  </a>
                </div>
              {{ end }}
            {{ end }}
